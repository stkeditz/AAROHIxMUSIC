from AarohiX import app 
import asyncio
import random
from pyrogram import Client, filters
from pyrogram.errors import UserNotParticipant
from pyrogram.types import ChatPermissions

spam_chats = []

EMOJI = ["ЁЯжЛЁЯжЛЁЯжЛЁЯжЛЁЯжЛ"]

TAGMES = [ " **тЭЕ рдмреЗрдмреА рдХрд╣рд╛ рд╣реЛред ЁЯдЧ** ",
           " **тЭЕ рдУрдП рд╕реЛ рдЧрдП рдХреНрдпрд╛, рдСрдирд▓рд╛рдЗрди рдЖрдУ редЁЯШК** ",
           " **тЭЕ рдУрдП рд╡реАрд╕реА рдЖрдУ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВ ред ЁЯШГ** ",
           " **тЭЕ рдЦрд╛рдирд╛ рдЦрд╛рдпрд╛ рдХрд┐ рдирд╣реАред ЁЯе▓** ",
           " **тЭЕ рдШрд░ рдореЗрдВ рд╕рдм рдХреИрд╕реЗ рд╣реИрдВред ЁЯе║** ",
           " **тЭЕ рдкрддрд╛ рд╣реИ рдмрд╣реБрдд рдпрд╛рдж рдЖ рд░рд╣реА рдЖрдкрдХреАред ЁЯдн** ",
           " **тЭЕ рдФрд░ рдмрддрд╛рдУ рдХреИрд╕реЗ рд╣реЛред..?? ЁЯди** ",
           " **тЭЕ рдореЗрд░реА рднреА рд╕реИрдЯрд┐рдВрдЧ рдХрд░рд╡рд╛ рджреЛ рдкреНрд▓реАрдЬ..?? ЁЯЩВ** ",
           " **тЭЕ рдЖрдкрдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рд╣реИред..?? ЁЯе▓** ",
           " **тЭЕ рдирд╛рд╢реНрддрд╛ рд╣реЛ рдЧрдпрд╛..?? ЁЯШЛ** ",
           " **тЭЕ рдореБрдЭреЗ рдЕрдкрдиреЗ рдЧреНрд░реВрдк рдореЗрдВ рдРрдб рдХрд░ рд▓реЛред ЁЯШН** ",
           " **тЭЕ рдЖрдкрдХрд╛ рджреЛрд╕реНрдд рдЖрдкрдХреЛ рдмреБрд▓рд╛ рд░рд╣рд╛ рд╣реИред ЁЯШЕ** ",
           " **тЭЕ рдореБрдЭрд╕реЗ рд╢рд╛рджреА рдХрд░реЛрдЧреЗ ..?? ЁЯдФ** ",
           " **тЭЕ рд╕реЛрдиреЗ рдЪрд▓реЗ рдЧрдП рдХреНрдпрд╛ ЁЯЩД** ",
           " **тЭЕ рдЕрд░реЗ рдпрд╛рд░ рдХреЛрдИ AC рдЪрд▓рд╛ рджреЛ ЁЯШХ** ",
           " **тЭЕ рдЖрдк рдХрд╣рд╛ рд╕реЗ рд╣реЛ..?? ЁЯЩГ** ",
           " **тЭЕ рд╣реЗрд▓реЛ рдЬреА рдирдорд╕реНрддреЗ ЁЯШЫ** ",
           " **тЭЕ BABY рдХреНрдпрд╛ рдХрд░ рд░рд╣реА рд╣реЛ..? ЁЯдФ** ",
           " **тЭЕ рдХреНрдпрд╛ рдЖрдк рдореБрдЭреЗ рдЬрд╛рдирддреЗ рд╣реЛ .? тШ║я╕П** ",
           " **тЭЕ рдЖрдУ baby Ludo рдЦреЗрд▓рддреЗ рд╣реИ .ЁЯдЧ** ",
           " **тЭЕ рдЪрд▓рддреА рд╣реИ рдХреНрдпрд╛ 9 рд╕реЗ 12... ЁЯШЗ** ",
           " **тЭЕ рдЖрдкрдХреЗ рдкрд╛рдкрд╛ рдХреНрдпрд╛ рдХрд░рддреЗ рд╣реИ ЁЯдн** ",
           " **тЭЕ рдЖрдУ baby рдмрд╛рдЬрд╛рд░ рдЪрд▓рддреЗ рд╣реИ рдЧреЛрд▓рдЧрдкреНрдкреЗ рдЦрд╛рдиреЗред ЁЯе║** ",
           " **тЭЕ рдЕрдХреЗрд▓реА рдирд╛ рдмрд╛рдЬрд╛рд░ рдЬрд╛рдпрд╛ рдХрд░реЛ, рдирдЬрд╝рд░ рд▓рдЧ рдЬрд╛рдпреЗрдЧреАред ЁЯШ╢** ",
           " **тЭЕ рдФрд░ рдмрддрд╛рдУ BF рдХреИрд╕рд╛ рд╣реИ ..?? ЁЯдФ** ",
           " **тЭЕ рдЧреБрдб рдореЙрд░реНрдирд┐рдВрдЧ ЁЯШЬ** ",
           " **тЭЕ рдореЗрд░рд╛ рдПрдХ рдХрд╛рдо рдХрд░реЛрдЧреЗред ЁЯЩВ** ",
           " **тЭЕ DJ рд╡рд╛рд▓реЗ рдмрд╛рдмреВ рдореЗрд░рд╛ рдЧрд╛рдирд╛ рдЪрд▓рд╛ рджреЛред ЁЯШк** ",
           " **тЭЕ рдЖрдк рд╕реЗ рдорд┐рд▓рдХрд░ рдЕрдЪреНрдЫрд╛ рд▓рдЧрд╛редтШ║** ",
           " **тЭЕ рдореЗрд░реЗ рдмрд╛рдмреВ рдиреЗ рдерд╛рдирд╛ рдерд╛рдпрд╛ред..? ЁЯЩК** ",
           " **тЭЕ рдкрдврд╝рд╛рдИ рдХреИрд╕реА рдЪрд▓ рд░рд╣реА рд╣реИрдВ ? ЁЯШ║** ",
           " **тЭЕ рд╣рдо рдХреЛ рдкреНрдпрд╛рд░ рд╣реБрдЖред ЁЯе▓** ",
           " **тЭЕ Nykaa рдХреМрди рд╣реИ...? ЁЯШЕ** ",
           " **тЭЕ рддреВ рдЦреАрдВрдЪ рдореЗрд░реА рдлрд╝реЛрдЯреЛ ..? ЁЯШЕ** ",
           " **тЭЕ Phone рдХрд╛рдЯ рдордореНрдореА рдЖ рдЧрдИ рдХреНрдпрд╛ред ЁЯШЖ** ",
           " **тЭЕ рдФрд░ рднрд╛рдмреА рд╕реЗ рдХрдм рдорд┐рд▓ рд╡рд╛ рд░рд╣реЗ рд╣реЛ ред ЁЯШЙ** ",
           " **тЭЕ рдХреНрдпрд╛ рдЖрдк рдореБрдЭрд╕реЗ рдкреНрдпрд╛рд░ рдХрд░рддреЗ рд╣реЛ ЁЯТЪ** ",
           " **тЭЕ рдореИрдВ рддреБрдо рд╕реЗ рдмрд╣реБрдд рдкреНрдпрд╛рд░ рдХрд░рддреА рд╣реВрдВ..? ЁЯСА** ",
           " **тЭЕ рдмреЗрдмреА рдПрдХ kiss рджреЛ рдирд╛..?? ЁЯЩЙ** ",
           " **тЭЕ рдПрдХ рдЬреЙрдХ рд╕реБрдирд╛рдКрдВ..? ЁЯШ╣** ",
           " **тЭЕ vc рдкрд░ рдЖрдУ рдХреБрдЫ рджрд┐рдЦрд╛рддреА рд╣реВрдВ  ЁЯШ╗** ",
           " **тЭЕ рдХреНрдпрд╛ рддреБрдо instagram рдЪрд▓рддреЗ рд╣реЛ..?? ЁЯЩГ** ",
           " **тЭЕ whatsapp рдирдВрдмрд░ рджреЛ рдирд╛ рдЕрдкрдирд╛..? ЁЯШХ** ",
           " **тЭЕ рдЖрдк рдХреА рджреЛрд╕реНрдд рд╕реЗ рдореЗрд░реА рд╕реЗрдЯрд┐рдВрдЧ рдХрд░рд╛ рджреЛ ..? ЁЯЩГ** ",
           " **тЭЕ рд╕рд╛рд░рд╛ рдХрд╛рдо рд╣реЛ рдЧрдпрд╛ рд╣реЛ рддреЛ рдСрдирд▓рд╛рдЗрди рдЖ рдЬрд╛рдУред..? ЁЯЩГ** ",
           " **тЭЕ рдХрд╣рд╛ рд╕реЗ рд╣реЛ рдЖрдк ЁЯШК** ",
           " **тЭЕ рдЬрд╛ рддреБрдЭреЗ рдЖрдЬрд╝рд╛рдж рдХрд░ рджрд┐рдпрд╛ рдореИрдВрдиреЗ рдореЗрд░реЗ рджрд┐рд▓ рд╕реЗред ЁЯе║** ",
           " **тЭЕ рдореЗрд░рд╛ рдПрдХ рдХрд╛рдо рдХрд░реЛрдЧреЗ, рдЧреНрд░реВрдк рдореЗ рдХреБрдЫ рдореЗрдВрдмрд░ рдРрдб рдХрд░ рджреЛ ..? тЩея╕П** ",
           " **тЭЕ рдореИрдВ рддреБрдорд╕реЗ рдирд╛рд░рд╛рдЬрд╝ рд╣реВрдВ ЁЯШа** ",
           " **тЭЕ рдЖрдкрдХреА рдлреИрдорд┐рд▓реА рдХреИрд╕реА рд╣реИ..? тЭд** ",
           " **тЭЕ рдХреНрдпрд╛ рд╣реБрдЖ..? ЁЯдФ** ",
           " **тЭЕ рдмрд╣реБрдд рдпрд╛рдж рдЖ рд░рд╣реА рд╣реИ рдЖрдкрдХреА ЁЯШТ** ",
           " **тЭЕ рднреВрд▓ рдЧрдП рдореБрдЭреЗ ЁЯШП** ",
           " **тЭЕ рдЭреВрда рдХреНрдпреЛрдВ рдмреЛрд▓рд╛ рдЖрдкрдиреЗ рдореБрдЭрд╕реЗ ЁЯдР** ",
           " **тЭЕ рдЗрддрдирд╛ рднрд╛рд╡ рдордд рдЦрд╛рдпрд╛ рдХрд░реЛ, рд░реЛрдЯреА рдЦрд╛рдпрд╛ рдХрд░реЛ рдХрдо рд╕реЗ рдХрдо рдореЛрдЯреА рддреЛ рд╣реЛ рдЬрд╛рдУрдЧреА ЁЯШТ** ",
           " **тЭЕ рдпреЗ attitude рдХрд┐рд╕реЗ рджрд┐рдЦрд╛ рд░рд╣реЗ рд╣реЛ ЁЯШо** ",
           " **тЭЕ рд╣реЗрдорд▓реЛ рдХрд╣рд╛ busy ho ЁЯСА** ",
           " **тЭЕ рдЖрдкрдХреЗ рдЬреИрд╕рд╛ рджреЛрд╕реНрдд рдкрд╛рдХрд░ рдореЗ рдмрд╣реБрдд рдЦреБрд╢ рд╣реВрдВред ЁЯЩИ** ",
           " **тЭЕ рдЖрдЬ рдорди рдмрд╣реБрдд рдЙрджрд╛рд╕ рд╣реИ тШ╣я╕П** ",
           " **тЭЕ рдореБрдЭрд╕реЗ рднреА рдмрд╛рдд рдХрд░ рд▓реЛ рдирд╛ ЁЯе║** ",
           " **тЭЕ рдЖрдЬ рдЦрд╛рдиреЗ рдореЗрдВ рдХреНрдпрд╛ рдмрдирд╛рдпрд╛ рд╣реИ ЁЯСА** ",
           " **тЭЕ рдХреНрдпрд╛ рдЪрд▓ рд░рд╣рд╛ рд╣реИ ЁЯЩВ** ",
           " **тЭЕ message рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд░рддреА рд╣реЛ..ЁЯе║** ",
           " **тЭЕ рдореИрдВ рдорд╛рд╕реВрдо рд╣реВрдВ рдирд╛ ЁЯе║** ",
           " **тЭЕ рдХрд▓ рдордЬрд╝рд╛ рдЖрдпрд╛ рдерд╛ рдирд╛ ЁЯШЕ** ",
           " **тЭЕ рдХрд▓ рдХрд╣рд╛ busy рдереЗ ЁЯШХ** ",
           " **тЭЕ рдЖрдк relationship рдореЗрдВ рд╣реЛ рдХреНрдпрд╛..? ЁЯСА** ",
           " **тЭЕ рдХрд┐рддрдиреЗ рд╢рд╛рдВрдд рд░рд╣рддреЗ рд╣реЛ рдпрд╛рд░ рдЖрдк ЁЯШ╝** ",
           " **тЭЕ рдЖрдкрдХреЛ рдЧрд╛рдирд╛, рдЧрд╛рдирд╛ рдЖрддрд╛ рд╣реИ..? ЁЯШ╕** ",
           " **тЭЕ рдШреВрдордиреЗ рдЪрд▓реЛрдЧреЗ рдореЗрд░реЗ рд╕рд╛рде..?? ЁЯЩИ** ",
           " **тЭЕ рд╣рдореЗрд╢рд╛ рд╣реИрдкреНрдкреА рд░рд╣рд╛ рдХрд░реЛ рдпрд╛рд░ ЁЯдЮ** ",
           " **тЭЕ рдХреНрдпрд╛ рд╣рдо рджреЛрд╕реНрдд рдмрди рд╕рдХрддреЗ рд╣реИ...? ЁЯе░** ",
           " **тЭЕ рдЖрдк рдХрд╛ рд╡рд┐рд╡рд╛рд╣ рд╣реЛ рдЧрдпрд╛ рдХреНрдпрд╛.. ЁЯе║** ",
           " **тЭЕ рдХрд╣рд╛ busy the рдЗрддрдиреЗ рджрд┐рдиреЛрдВ рд╕реЗ ЁЯе▓** ",
           " **тЭЕ single рд╣реЛ рдпрд╛ mingle ЁЯШЙ** ",
           " **тЭЕ рдЖрдУ рдкрд╛рд░реНрдЯреА рдХрд░рддреЗ рд╣реИ ЁЯе│** ",
           " **тЭЕ Bio рдореЗрдВ link рд╣реИрдВ join рдХрд░ рд▓реЛ ЁЯзР** ",
           " **тЭЕ рдореИрдВ рддреБрдорд╕реЗ рдкреНрдпрд╛рд░ рдирд╣реАрдВ рдХрд░рддреА, ЁЯе║** ",
           " **тЭЕ рдпрд╣рд╛рдВ рдЖ рдЬрд╛рдУ рдирд╛ @alonegroup121 рдорд╕реНрддреА рдХрд░реЗрдВрдЧреЗ ЁЯдн** ",
           " **тЭЕ рднреВрд▓ рдЬрд╛рдУ рдореБрдЭреЗ,..? ЁЯШК** ",
           " **тЭЕ рдЕрдкрдирд╛ рдмрдирд╛ рд▓реЗ рдкрд┐рдпрд╛, рдЕрдкрдирд╛ рдмрдирд╛ рд▓реЗ ЁЯе║** ",
           " **тЭЕ рдореЗрд░рд╛ рдЧреНрд░реБрдк рднреА join рдХрд░ рд▓реЛ рдирд╛ ЁЯдЧ** ",
           " **тЭЕ рдореИрдиреЗ рддреЗрд░рд╛ рдирд╛рдо Dil rakh diya ЁЯШЧ** ",
           " **тЭЕ рддреБрдорд╛рд░реЗ рд╕рд╛рд░реЗ рджреЛрд╕реНрдд рдХрд╣рд╛ рдЧрдП ЁЯе║** ",
           " **тЭЕ my cute owner @Honey_Singh_121 ЁЯе░** ",
           " **тЭЕ рдХрд┐рд╕рдХреА рдпрд╛рдж рдореЗ рдЦреЛрдП рд╣реЛ рдЬрд╛рди ЁЯШЬ** ",
           " **тЭЕ рдЧреБрдб рдирд╛рдИрдЯ рдЬреА рдмрд╣реБрдд рд░рд╛рдд рд╣реЛ рдЧрдИ ЁЯе░** ",
           ]
 

@app.on_message(filters.command(["hitag"], prefixes=["/", "@", "#"]))
async def mentionall(client, message):
    chat_id = message.chat.id
    if message.chat.type == "private":
        return await message.reply("This command can be used in groups and channels!")

    is_admin = False
    try:
        participant = await client.get_chat_member(chat_id, message.from_user.id)
    except UserNotParticipant:
        is_admin = False
    else:
        if participant.status in ("administrator", "creator"):
            is_admin = True
    if not is_admin:
        return await message.reply("Only admin can use this command!")

    if message.reply_to_message and message.text:
        return await message.reply("/tagall hello ЁЯСИ Try this next time for tagging..")
    elif message.text:
        mode = "text_on_cmd"
        msg = message.text
    elif message.reply_to_message:
        mode = "text_on_reply"
        msg = message.reply_to_message
        if not msg:
            return await message.reply("/tagall hii ЁЯСИ Try this or reply any message...")
    else:
        return await message.reply("/tagall hii ЁЯСИ Try this or reply any message...")

    spam_chats.append(chat_id)
    usrnum = 0
    usrtxt = ""
    async for usr in client.iter_chat_members(chat_id):
        if not chat_id in spam_chats:
            break
        if usr.user.is_bot:
            continue
        usrnum += 1
        usrtxt += f"[{usr.user.first_name}](tg://user?id={usr.user.id}) "

        if usrnum == 1:
            if mode == "text_on_cmd":
                txt = f"{usrtxt} {random.choice(TAGMES)}"
                await client.send_message(chat_id, txt)
            elif mode == "text_on_reply":
                await msg.reply(f"[{random.choice(EMOJI)}](tg://user?id={usr.user.id})")
            await asyncio.sleep(2)
            usrnum = 0
            usrtxt = ""
    try:
        spam_chats.remove(chat_id)
    except:
        pass

@app.on_message(filters.command(["cancel", "stop"]))
async def cancel_spam(client, message):
    if not message.chat.id in spam_chats:
        return await message.reply("No active mention process is started by me.")
    is_admin = False
    try:
        participant = await client.get_chat_member(message.chat.id, message.from_user.id)
    except UserNotParticipant:
        is_admin = False
    else:
        if participant.status in ("administrator", "creator"):
            is_admin = True
    if not is_admin:
        return await message.reply("This command is only for admins. You can't use this command.")
    else:
        try:
            spam_chats.remove(message.chat.id)
        except:
            pass
        return await message.reply("тЩж Mention process stopped тЩж")
